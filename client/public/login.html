<!doctype html>
<html lang="ko">
     <head>
          <meta charset="UTF-8" />
          <meta
               name="viewport"
               content="width=device-width, initial-scale=1.0"
          />
          <meta name="author" content="Changmin Kang" />
          <title>내일배움캠프 Node.js 트랙 타워 디펜스 게임</title>
          <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
          <link rel="stylesheet" href="./css/login.css" />
     </head>
     <body>
          <div class="form-container">
               <h1>내일배움캠프 Node.js 트랙 타워 디펜스 게임</h1>
               <h2>로그인</h2>
               <input type="text" id="accountId" placeholder="아이디" />
               <input type="password" id="password" placeholder="비밀번호" />
               <button id="login">로그인</button>
               <button id="back">뒤로가기</button>
          </div>
          <script>
               document
                    .getElementById("login")
                    .addEventListener("click", () => {
                         const accountId =
                              document.getElementById("accountId").value;
                         const password =
                              document.getElementById("password").value;

                         fetch("/api/signin", {
                              method: "POST",
                              headers: {
                                   "Content-Type": "application/json",
                              },
                              body: JSON.stringify({
                                   accountId,
                                   password,
                              }),
                         })
                              .then((response) => {
                                   if (response.ok) {
                                        window.location.href = "game.html";
                                   } else {
                                        alert(
                                             "로그인에 실패했습니다. 다시 시도해 주세요."
                                        );
                                   }
                              })
                              .catch((error) => {
                                   console.error("Error:", error);
                                   alert(
                                        "서버와의 연결에 문제가 발생했습니다."
                                   );
                              });
                    });

               document.getElementById("back").addEventListener("click", () => {
                    window.location.href = "index.html";
               });
          </script>
     </body>
</html>
